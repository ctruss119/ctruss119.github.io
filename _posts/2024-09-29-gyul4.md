---
layout: post
title:  "[9ì›”-4] ë„ì»¤ë¡œ ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ ì‹¤ìŠµí•˜ê¸°"
---

### ëª©ì°¨
[1. ì»¨í…Œì´ë„ˆê°€ ë°°í¬ê¹Œì§€ ê±°ì¹˜ëŠ” ê³¼ì •](#ì»¨í…Œì´ë„ˆê°€-ë°°í¬ê¹Œì§€-ê±°ì¹˜ëŠ”-ê³¼ì •)
[2. ë…¸ë“œ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°](#ë…¸ë“œ-í”„ë¡œì íŠ¸-ë§Œë“¤ê¸°)
[3. ë„ì»¤ íŒŒì¼ ë§Œë“¤ê¸°](#ë„ì»¤-íŒŒì¼-ë§Œë“¤ê¸°)
[4. ì´ë¯¸ì§€ ë§Œë“¤ê¸°](#ì´ë¯¸ì§€-ë§Œë“¤ê¸°)
[5. ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰](#ë„ì»¤-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰)
[6. ì»¨í…Œì´ë„ˆ í™•ì¸](#ì»¨í…Œì´ë„ˆ-í™•ì¸)
[7. ì»¨í…Œì´ë„ˆ ë°°í¬](#ì»¨í…Œì´ë„ˆ-ë°°í¬)

-------------------------------------------------------------------   



# ì»¨í…Œì´ë„ˆê°€ ë°°í¬ê¹Œì§€ ê±°ì¹˜ëŠ” ê³¼ì • 

0. ê°œë°œì— ì‚¬ìš©í•  ë¡œì»¬ ë¨¸ì‹ ê³¼, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•  ì„œë²„ì— ë„ì»¤ë¥¼ ì„¤ì¹˜í•¨.
1. ë¡œì»¬ ë¨¸ì‹ ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ëŠ”ë° í•„ìš”í•œ ë„ì»¤ íŒŒì¼ì„ ì‘ì„±í•¨.
2. ë„ì»¤íŒŒì¼ì„ ì´ìš©í•´ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìŠ¤ëƒ…ìƒ· í•  ìˆ˜ ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ë§Œë“¦.
3. ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì˜¬ë¦¼(push)
- ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬   
  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê³  ë°°í¬í•˜ëŠ” ì¤‘ì•™ ì €ì¥ì†Œ. ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ì—…ë¡œë“œí•´ ê³µìœ í•  ìˆ˜ ìˆìŒ.   
  ì´ë•Œ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì˜ ì¢…ë¥˜ì—ëŠ” í¼ë¸”ë¦­(ë„ì»¤ í—ˆë¸Œ, ê¹ƒí—ˆë¸Œ íŒ¨í‚¤ì§€ìŠ¤), í”„ë¼ì´ë¹—(aws, êµ¬ê¸€ í´ë¼ìš°ë“œ)ì´ ìˆëŠ”ë°, ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ê¸°ì—…ì€ í”„ë¼ì´ë¹—ì„ ì„ í˜¸í•¨
4. í•„ìš”í•œ ì„œë²„ë‚˜ ë‹¤ë¥¸ pcì—ì„œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¡œë¶€í„° ë‹¤ìš´ë¡œë“œ(pull)í•¨
5. ë°›ì€ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆ ì—”ì§„ì¸ ë„ì»¤ë¥¼ í†µí•´ ì‹¤í–‰í•¨.


ì´ëŸ¬í•œ ì „ì²´ ê³¼ì •ì„ ê°„ë‹¨í•œ ì»¨í…Œì´ë„ˆ ë§Œë“œëŠ” ì‹¤ìŠµìœ¼ë¡œ ì—°ìŠµí•  ê²ƒì„. 
ì‹¬í”Œí•œ í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•˜ëŠ” nodejs appë¥¼ ë§Œë“¤ ê²ƒì„. 
[ì°¸ê³ í•œ ì½”ë“œê°€ ìˆëŠ” ê¹ƒí—ˆë¸Œ](https://github.com/dream-ellie/docker-example) 

   
# ë…¸ë“œ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ ì‹¬í”Œí•œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ ê²ƒì„.   

1. ìƒˆ Node.js í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í–ˆìŒ. 
```
# ì—°ìŠµìš© ë””ë ‰í„°ë¦¬ ë§Œë“¤ê³  
mkdir '/home/KGR' 
mkdir: cannot create directory â€˜/home/KGRâ€™: Permission denied
mkdir '/home/cybermarine/KGR_practice'
cd /home/cybermarine/KGR_practice

# Node.js í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™” í•¨. 
npm init -y

# ê·¸ëŸ¬ë©´ ì´ëŸ° package.json ì´ë¼ëŠ” ê¸°ë³¸ ì„¤ì • íŒŒì¼ì´ ìƒê¹€.
Wrote to /home/cybermarine/KGR_practice/package.json:
{
  "name": "kgr_practice",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": ""
}

# Node.js í™˜ê²½ì—ì„œ Expressë¼ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•¨.
# ì„¤ì¹˜í•˜ë©´ Expressë¥¼ ì½”ë“œì—ì„œ ë¶ˆëŸ¬ì™€ ì›¹ ì„œë²„ë¥¼ ë§Œë“œëŠ” ë“± ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ.
npm i express

```


2. index.js íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ express ë°±ì—”ë“œë¥¼ ë§Œë“¦.
```
const express = require('express');

const app = express();

app.get('/', (req, res) => {
  res.send('ğŸ³ ì•ˆë…•í•˜ì„¸ìš” ê¹€ê·œë¦¬ì…ë‹ˆë‹¤ ğŸ³');
});

app.listen(8080, () => console.log('Server is running ğŸ¤–'));
```
ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ë¬¸êµ¬ë¥¼ ì¶œë ¥í•˜ëŠ” ë°±ì—”ë“œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„. 
íŒŒì¼ ì‘ì„± í›„ ë°±ì—”ë“œ ì„œë²„ë¥¼ êµ¬ë™í•˜ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼í•˜ë©´ ë©”ì„¸ì§€ë¥¼ ë³¼ ìˆ˜ ìˆìŒ. 
```
#ì½˜ì†” ì°½ì—ëŠ” ì´ë ‡ê²Œ ëœ¸
cybermarine@cybermarine-Z790-AORUS-ELITE:~/KGR_practice$ node index.js #êµ¬ë™í•˜ëŠ” ëª…ë ¹ì–´ 
Server is running ğŸ¤–
```

# ë„ì»¤ íŒŒì¼ ë§Œë“¤ê¸°
```
# Docker ì´ë¯¸ì§€ ì„¤ì •í•¨. ì–´ë–¤ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í• ì§€ ëª…ì‹œí•˜ëŠ”ê±°ì„ 
# node:16-alpine ì´ë¯¸ì§€( Node.jsì˜ 16ë²„ì „ì´ ì„¤ì¹˜ëœ Alpine Linux ê¸°ë°˜ì˜ ê²½ëŸ‰ ì´ë¯¸ì§€)ë¥¼ ì‚¬ìš©í•œë‹¤.  
FROM node:16-alpine

# WORKDIRì´ë¼ëŠ” ëª…ë ¹ì–´ë¡œ ì–´ë–¤ ê²½ë¡œë¡œ ìš°ë¦¬ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í• ì§€ ëª…ì‹œí•˜ëŠ” ê±°ì„. 
# /app ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  ê·¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•´ì„œ, ì´í›„ì˜ ëª¨ë“  ëª…ë ¹ì€ ì´ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰ë˜ê²Œ ë¨ 
WORKDIR /app

# ê·¸ ë„ì»¤ ì´ë¯¸ì§€ ê²½ë¡œì— ìš°ë¦¬ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì˜ì¡´ì„±ì„ ëª…ì‹œí•˜ê³ ìˆëŠ”  package-lock.jsonì„ ì¹´í”¼í•´ì™€ì„œ 
COPY package.json package-lock.json ./

# ê·¸ê±¸ ì „ë¶€ ì„¤ì¹˜í•˜ëŠ” ëª…ë ¹ì–´ 
RUN npm ci

# ì†ŒìŠ¤íŒŒì¼ì„ ì¹´í”¼í•´ì™€ì„œ 
COPY index.js .

# ENTRYPOINTë¼ëŠ” ëª…ë ¹ì–´ë¡œ ë…¸ë“œë¼ëŠ” ê±¸ index.js íŒŒì¼ë¡œ ì‹¤í–‰í•˜ë¼ê³  ëª…ë ¹í•¨ã… 
ENTRYPOINT [ "node", "index.js" ]

```
ë„ì»¤íŒŒì¼ì„ ë§Œë“œëŠ” ì›ì¹™, ëª…ë ¹ì–´ëŠ” ë‹¤ìŒ ë§í¬ë¥¼ ì°¸ê³ í•˜ë©´ ë¨.    
[ë„ì»¤ë…ìŠ¤](https://docs.docker.com/build/building/best-practices/)   

# ì´ë¯¸ì§€ ë§Œë“¤ê¸°
```
docker build -f Dockerfile -t practicekgr-docker .
```
* . ëŠ” build contextë¡œ ëª€ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” í˜„ì¬ ê²½ë¡œë¥¼ ì§€ì •í•¨
* -fëŠ” ì–´ë–¤ ë„ì»¤íŒŒì¼ì„ ìˆ˜í–‰í• ì§€ ëª…ì‹œí•˜ëŠ” ê²ƒì„
~~* -t ì˜µì…˜ì€ ë„ì»¤ ì´ë¯¸ì§€ì— ì´ë¦„ì„ ë¶™ì´ëŠ” ê²ƒì„. ë‚˜ëŠ” practiceKGR-dockerë¼ ì´ë¦„ë¶™ì„.~~
* ê·œì¹™ìƒ ëŒ€ë¬¸ìëŠ” ì•ˆëœë‹¤ê³  í•´ì„œ error ë– ì„œ ì†Œë¬¸ìë¡œ ë‹¤ì‹œ í•¨ ...

![Terminal Image](https://github.com/ctruss119/ctruss119.github.io/blob/master/practicekgr-docker.png)

ìˆœì°¨ì ìœ¼ë¡œ ëª…ì‹œí•œ ëª…ë ¹ì–´ë“¤ì´ ì‹¤í–‰ë˜ì–´ì„œ ê³„ì¸µë³„ë¡œ ìŒ“ì´ë“¯ì´ ì´ë¯¸ì§€ê°€ ë§Œë“¤ì–´ì§„ ê±¸ ì•Œ ìˆ˜ ìˆìŒ 

í˜¹ì€ ì•„ë˜ì²˜ëŸ¼ docker images ëª…ë ¹ì–´ë¥¼ í†µí•´ ë„ì»¤ ì´ë¯¸ì§€ë“¤ì„ í™•ì¸í–ˆì„ ë•Œ,    
ë°©ê¸ˆ ë§Œë“¤ì–´ì§„ practicekgr-docker ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ. 
```
cybermarine@cybermarine-Z790-AORUS-ELITE:~/KGR_practice$ docker images
REPOSITORY                    TAG          IMAGE ID       CREATED         SIZE
practicekgr-docker            latest       6b8cd5d3161c   3 minutes ago   123MB
flux-app                      latest       1e722932065d   39 hours ago    18.8GB
python                        latest       ea2ebd905ab2   2 weeks ago     1.01GB
python                        3.8-slim     5af70b71c63a   2 weeks ago     125MB
gcr.io/k8s-minikube/kicbase   v0.0.45      aeed0e1d4642   3 weeks ago     1.28GB
nvcr.io/nvidia/pytorch        24.08-py3    c4c51e501ca9   5 weeks ago     20.4GB
tensorflow/tensorflow         latest-gpu   30369aa97d26   2 months ago    7.4GB
tensorflow/tensorflow         latest       8f6e945a1a52   2 months ago    1.86GB
nvcr.io/nvidia/pytorch        24.07-py3    50c3221ab3e0   2 months ago    20.2GB
nvcr.io/nvidia/pytorch        24.05-py3    d936dd218d4f   4 months ago    18.8GB
hello-world                   latest       d2c94e258dcb   17 months ago   13.3kB
docker/getting-started        latest       3e4394f6b72f   21 months ago   47MB
fluxcd/flux                   1.25.4       f68a26e40805   2 years ago     254MB
```

# ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```
docker run -d -p 8080:8080 practicekgr-docker
```
* -d ì˜µì…˜ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ detached ì˜µì…˜
* -p ì˜µì…˜ìœ¼ë¡œ í¬íŠ¸ ì§€ì •. í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ê³¼ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” ê±°ì„.

![Terminal Image2](https://github.com/ctruss119/ctruss119.github.io/blob/master/assets/img/practicedockerps.png)
ìœ„ ì‚¬ì§„ì„ ë³´ë©´ ëª…ë ¹ì–´ ìˆ˜í–‰ ì´í›„ ë„ì»¤ì˜ ì•„ì´ë””ë¥¼ ë¶€ì—¬ë°›ì•˜ê³ ,    
docker psë¡œ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆë¥¼ ê²€ìƒ‰í–ˆì„ ë•Œ ëœ¨ëŠ” ê²Œ ë³´ì„

# ì»¨í…Œì´ë„ˆ í™•ì¸
```
docker states
```
ëª…ë ¹ì–´ ì¹˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì˜ ëŒì•„ê°€ê³  ì‡ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.  
CONTAINER ID   NAME           CPU %     MEM USAGE / LIMIT     MEM %     NET I/O       BLOCK I/O   PIDS
60ab5aaa7892   funny_curran   0.00%     11.59MiB / 125.6GiB   0.01%     3.73kB / 0B   0B / 0B     7

# ì»¨í…Œì´ë„ˆ ë°°í¬
ë„ì»¤ í—ˆë¸Œì— íšŒì›ê°€ì… í›„ create registry ëˆ„ë¥´ê³  
```
docker login  #ë¡œê·¸ì¸í•˜ê³ 
doker push {ê³„ì •ê³¼ ë ˆí¬ì§€í† ë¦¬ ì´ë¦„ì„ ì‘ì„±}
```
ì…ë ¥í•˜ë©´ ì´ë¯¸ì§€ê°€ ì˜¬ë¼ê°.
pullí•˜ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œëŠ” tensorflowë¥¼ pull í•˜ëŠ” ê²ƒìœ¼ë¡œ ì—°ìŠµí–ˆìŒ. 

-----------------------------------------------------------------------
[ì°¸ê³ ì˜ìƒ](https://www.youtube.com/watch?v=LXJhA3VWXFA&t=146s)





